"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canUseWebp=exports.OS=void 0,exports.cancelWebp=cancelWebp,exports.iterateTags=iterateTags;var OS=exports.OS=function(){var e=navigator.platform.toLowerCase();return e.includes("mac")?"MacOS":["iphone","ipad","ipod","ipod touch"].includes(e)?"iOS":e.includes("win")?"Windows":/android/.test(navigator.userAgent.toLowerCase())?"Android":/linux/.test(e)?"Linux":"unknown"}(),canUseWebp=exports.canUseWebp=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")}();function iterateTags(e,o){e.forEach(function(e){var t=e.getAttribute(o);if(t){var a=e.getAttribute("data-ext")||"jpg",n=t.replace(/\/webp\//,"/").replace(/\.\w+$/,".".concat(a));"img"===e.tagName.toLowerCase()?e.setAttribute("src",n):"source"!==e.tagName.toLowerCase()&&"image"!==e.tagName.toLowerCase()||e.setAttribute("href",n)}})}function cancelWebp(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["img"];!canUseWebp||"MacOS"===OS||document.documentElement.classList.contains("no-webp")?e.forEach(function(e){iterateTags(document.querySelectorAll("".concat(e,"[data-src]")),"data-src")}):console.log("canUseWebp!")}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvY2FuX3VzX3dlYnAuanMiXSwibmFtZXMiOlsiT1MiLCJleHBvcnRzIiwicGxhdGZvcm0iLCJuYXZpZ2F0b3IiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwidGVzdCIsInVzZXJBZ2VudCIsImlvc1BsYXRmb3JtcyIsImNhblVzZVdlYnAiLCJlbGVtIiwiZ2V0Q29udGV4dCIsInRvRGF0YVVSTCIsImluZGV4T2YiLCJpdGVyYXRlVGFncyIsInRhZ3NMaXN0IiwiYXR0ciIsImZvckVhY2giLCJpdGVtIiwiZGF0YVNyYyIsImdldEF0dHJpYnV0ZSIsInJlcGxhY2UiLCJjb25jYXQiLCJleHQiLCJjbGVhblBhdGgiLCJ0YWdOYW1lIiwic2V0QXR0cmlidXRlIiwiY2FuY2VsV2VicCIsInNlbGVjdG9yTGlzdCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6InVLQUNBLElBQU1BLEdBQUVDLFFBQUFELEdBQUksV0FDUixJQUFNRSxFQUFXQyxVQUFVRCxTQUFTRSxjQUdwQyxPQUFJRixFQUFTRyxTQUFTLE9BQWUsUUFGaEIsQ0FBQyxTQUFVLE9BQVEsT0FBUSxjQUcvQkEsU0FBU0gsR0FBa0IsTUFDeENBLEVBQVNHLFNBQVMsT0FBZSxVQVB6QyxVQUFBQyxLQUFBSCxVQUFBSSxVQUFBSCxlQUFBLFVBQ1EsUUFBQUUsS0FBQUosR0FBVSxRQUVSTSxVQUZFLEdBT0pDLFdBQVVILFFBQUFBLFdBQUksV0FDbEIsSUFBSUksRUFBUUosU0FBS0osY0FBa0IsVUFFbkMsU0FBT1EsRUFBU0MsYUFBQUQsRUFBQUMsV0FBQSxRQUNoQixJQUFBRCxFQUFBRSxVQUFBLGNBQUFDLFFBQUEsbUJBSmtCLEdBV3RCLFNBQUlDLFlBQUFDLEVBQUFDLEdBTUFELEVBQVNFLFFBQVEsU0FBQUMsR0FGckIsSUFBQUMsRUFBQUQsRUFBQUUsYUFBQUosR0FDQSxHQUFTRixFQUFULENBRWNLLElBQUFBLEVBQVVELEVBQUtFLGFBQWFKLGFBQUssTUFDbENHLEVBQVNBLEVBQUFFLFFBQUEsV0FBQSxLQUFBQSxRQUFBLFNBQUEsSUFBQUMsT0FBQUMsSUFHb0IsUUFBNUJDLEVBQVNDLFFBQUdOLGNBRVZELEVBQUNPLGFBQVFyQixNQUFhb0IsR0FDUyxXQUE5QkUsRUFBYUQsUUFBT0QsZUFBVSxVQUFBTixFQUFBTyxRQUFBckIsZUFDaENjLEVBQUlBLGFBQWFkLE9BQUFBLE1BTWhDLFNBQUF1QixhQUFBLElBQUFDLEVBQUEsRUFBQUMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUEsQ0FBQSxRQUNTRixZQUFtQyxVQUFBM0IsSUFBQWdDLFNBQUFDLGdCQUFBQyxVQUFBQyxTQUFBLFdBQXhCUCxFQUFZQyxRQUFBQSxTQUFBQSxHQUV4QkQsWUFEc0JJLFNBQU9JLGlCQUFhSCxHQUFBQSxPQUFBQSxFQUFnQkMsZUFDckMsY0FHbkJHLFFBQUFDLElBQUEiLCJmaWxlIjoibGlicy9jYW5fdXNfd2VicC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vINCe0L/RgNC10LTQtdC70Y/QtdC8INCe0KFcbmNvbnN0IE9TID0gKCgpID0+IHtcbiAgICBjb25zdCBwbGF0Zm9ybSA9IG5hdmlnYXRvci5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IGlvc1BsYXRmb3JtcyA9IFsnaXBob25lJywgJ2lwYWQnLCAnaXBvZCcsICdpcG9kIHRvdWNoJ107XG5cbiAgICBpZiAocGxhdGZvcm0uaW5jbHVkZXMoJ21hYycpKSByZXR1cm4gJ01hY09TJztcbiAgICBpZiAoaW9zUGxhdGZvcm1zLmluY2x1ZGVzKHBsYXRmb3JtKSkgcmV0dXJuICdpT1MnO1xuICAgIGlmIChwbGF0Zm9ybS5pbmNsdWRlcygnd2luJykpIHJldHVybiAnV2luZG93cyc7XG4gICAgaWYgKC9hbmRyb2lkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSkpIHJldHVybiAnQW5kcm9pZCc7XG4gICAgaWYgKC9saW51eC8udGVzdChwbGF0Zm9ybSkpIHJldHVybiAnTGludXgnO1xuXG4gICAgcmV0dXJuICd1bmtub3duJztcbn0pKCk7XG5cbi8vINCf0YDQvtCy0LXRgNC60LAg0L/QvtC00LTQtdGA0LbQutC4IHdlYnBcbmNvbnN0IGNhblVzZVdlYnAgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICByZXR1cm4gISEoZWxlbS5nZXRDb250ZXh0ICYmIGVsZW0uZ2V0Q29udGV4dCgnMmQnKSkgJiZcbiAgICAgICAgZWxlbS50b0RhdGFVUkwoJ2ltYWdlL3dlYnAnKS5pbmRleE9mKCdkYXRhOmltYWdlL3dlYnAnKSA9PT0gMDtcbn0pKCk7XG5cblxuXG4vLyDQnNC10L3Rj9C10Lwg0L/Rg9GC0Ywg0LTQviDQutCw0YDRgtC40L3QutC4INC90LAg0YLQvtGCLCDRh9GC0L4g0LHQtdC3INC/0LDQv9C60LggL3dlYnAg0Lgg0YEg0LTRgNGD0LPQuNC8INGA0LDRgdGI0LjRgNC10L3QuNC10LxcbmZ1bmN0aW9uIGl0ZXJhdGVUYWdzKHRhZ3NMaXN0LCBhdHRyKSB7XG4gICAgdGFnc0xpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgY29uc3QgZGF0YVNyYyA9IGl0ZW0uZ2V0QXR0cmlidXRlKGF0dHIpO1xuICAgICAgICBpZiAoIWRhdGFTcmMpIHJldHVybjtcblxuICAgICAgICBjb25zdCBleHQgPSBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1leHQnKSB8fCAnanBnJztcbiAgICAgICAgY29uc3QgY2xlYW5QYXRoID0gZGF0YVNyYy5yZXBsYWNlKC9cXC93ZWJwXFwvLywgJy8nKS5yZXBsYWNlKC9cXC5cXHcrJC8sIGAuJHtleHR9YCk7XG5cbiAgICAgICAgaWYgKGl0ZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW1nJykge1xuICAgICAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGNsZWFuUGF0aCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzb3VyY2UnIHx8IGl0ZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZSgnaHJlZicsIGNsZWFuUGF0aCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8g0J7RgdC90L7QstC90LDRjyDRhNGD0L3QutGG0LjRjyDQvtGC0LzQtdC90Ysgd2VicFxuZnVuY3Rpb24gY2FuY2VsV2VicChzZWxlY3Rvckxpc3QgPSBbJ2ltZyddKSB7XG4gICAgaWYgKCFjYW5Vc2VXZWJwIHx8IE9TID09PSAnTWFjT1MnIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ25vLXdlYnAnKSkge1xuICAgICAgICBzZWxlY3Rvckxpc3QuZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCR7c2VsZWN0b3J9W2RhdGEtc3JjXWApO1xuICAgICAgICAgICAgaXRlcmF0ZVRhZ3MoZWxlbWVudHMsICdkYXRhLXNyYycpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnY2FuVXNlV2VicCEnKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IE9TLCBjYW5Vc2VXZWJwLCBpdGVyYXRlVGFncywgY2FuY2VsV2VicCB9O1xuXG5cbiJdfQ==
