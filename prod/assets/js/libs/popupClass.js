"use strict";exports.__esModule=!0,exports.Popup=void 0;var Popup=function(){function i(i){this.triggerSelectors=i.triggerSelectors,this.overlaySelector=i.overlaySelector,this.windowSelector=i.windowSelector,this.closeBtnSelectors=i.closeBtnSelectors,this.displayPopup=i.displayPopup||"flex",this.popupHeight=i.popupHeight||"100vh",this.popupWidth=i.popupWidth||"100%",this.disappearingTime=i.disappearingTime||600,this.disappearingType=i.disappearingType||"linear",this.slidingTime=i.slidingTime||500,this.slidingType=i.slidingType||"ease",this.slidingDir=i.slidingDir||"top",this.autocloseTime=i.autocloseTime,this.openOnKeys=i.openOnKeys,this.closeOnKeys=i.closeOnKeys,this.closeOnMiss=i.closeOnMiss||!0,this.appearType=i.appearType||"slide",this.popupOverlay=document.querySelector("".concat(this.overlaySelector)),this.popupWindow=document.querySelector("".concat(this.windowSelector)),console.log(this.appearType),this.init()}return i.prototype.init=function(){var o=this;if(this.hide(),this.triggerSelectors.forEach(function(i,t){document.querySelectorAll(i).forEach(function(i,t){console.log("trigger instance:"),console.log(i),i.addEventListener("click",o.show.bind(o)),i.addEventListener("touchstart",o.show.bind(o))})}),this.closeBtnSelectors.forEach(function(i,t){document.querySelectorAll(i).forEach(function(i,t){i.addEventListener("click",o.hide.bind(o)),i.addEventListener("touchstart",o.hide.bind(o))})}),this.closeOnMiss){var t=this.overlaySelector.slice(1);this.popupOverlay.addEventListener("click",function(i){i.target.classList.contains("".concat(t))&&o.hide()}),this.popupOverlay.addEventListener("touchstart",function(i){i.target.classList.contains("".concat(t))&&o.hide()})}function i(e,i,s){void 0===e&&(e=!1),e&&document.addEventListener(i,function(t){e.forEach(function(i){console.log(e),i==t.keyCode&&(console.log(o),s())})})}i(this.openOnKeys,"keydown",this.show.bind(this)),i(this.closeOnKeys,"keydown",this.hide.bind(this))},i.prototype.show=function(){var i=this;if(this.popupOverlay.style.zIndex=999999,"slide"==this.appearType)switch(this.popupWindow.style.transition="all ".concat(this.slidingTime/1e3,"s ").concat(this.slidingType,", height 0s ").concat(this.slidingType," 0s"),this.slidingTime&&this.slidingType&&this.slidingDir){case"left":this.popupWindow.style.left="0px";break;case"right":this.popupWindow.style.right="0px";break;case"top":this.popupWindow.style.top="0px";break;case"bottom":this.popupWindow.style.bottom="0px"}this.popupOverlay.style.height=this.popupHeight,this.popupOverlay.style.width=this.popupWidth,this.popupOverlay.style.opacity=1,this.popupOverlay.style.transition="opacity ".concat(this.disappearingTime/1e3,"s ").concat(this.disappearingType,", height 0s ").concat(this.disappearingType," 0s"),this.autocloseTime&&setTimeout(function(){i.hide()},this.autocloseTime)},i.prototype.hide=function(){if(this.popupOverlay.style.height=0,this.popupOverlay.style.opacity=0,console.log(this.popupOverlay),"slide"==this.appearType)switch(this.popupWindow.style.transition="all ".concat(this.slidingTime/1e3,"s ").concat(this.slidingType,", height 0s ").concat(this.slidingType," ").concat(this.slidingTime/1e3,"s"),this.slidingDir){case"left":this.popupWindow.style.left="-100%";break;case"right":this.popupWindow.style.right="-100%";break;case"top":this.popupWindow.style.top="-100%";break;case"bottom":this.popupWindow.style.bottom="-100%"}this.popupOverlay.style.transition="opacity ".concat(this.disappearingTime/1e3,"s ").concat(this.disappearingType,", height 0s ").concat(this.disappearingType," ").concat(this.disappearingTime/1e3,"s")},i}();exports.Popup=Popup;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcG9wdXBDbGFzcy5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwiX19lc01vZHVsZSIsIlBvcHVwIiwiZGF0YSIsInRoaXMiLCJ0cmlnZ2VyU2VsZWN0b3JzIiwib3ZlcmxheVNlbGVjdG9yIiwid2luZG93U2VsZWN0b3IiLCJjbG9zZUJ0blNlbGVjdG9ycyIsImRpc3BsYXlQb3B1cCIsInBvcHVwSGVpZ2h0IiwicG9wdXBXaWR0aCIsImRpc2FwcGVhcmluZ1RpbWUiLCJkaXNhcHBlYXJpbmdUeXBlIiwic2xpZGluZ1RpbWUiLCJzbGlkaW5nVHlwZSIsInNsaWRpbmdEaXIiLCJhdXRvY2xvc2VUaW1lIiwib3Blbk9uS2V5cyIsImNsb3NlT25LZXlzIiwiY2xvc2VPbk1pc3MiLCJhcHBlYXJUeXBlIiwicXVlcnlTZWxlY3RvciIsImNvbmNhdCIsInBvcHVwT3ZlcmxheSIsImRvY3VtZW50IiwiY29uc29sZSIsInBvcHVwV2luZG93IiwibG9nIiwicHJvdG90eXBlIiwiaW5pdCIsIl90aGlzIiwiaGlkZSIsImZvckVhY2giLCJpdGVtIiwiaW5kZXgiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWxsVHJpZ2dlckluc3RhbmNlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzaG93IiwiYmluZCIsInNsaWNlIiwicG9wdXBTZWxlY3Rvcl8xIiwiZSIsImNsYXNzTGlzdCIsImhhbmdMaXN0ZW5lcnMiLCJrZXlzIiwiZXZlbnQiLCJmdW5jIiwic3R5bGUiLCJ6SW5kZXgiLCJ0cmFuc2l0aW9uIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiaGVpZ2h0Iiwid2lkdGgiLCJvcGFjaXR5Iiwic2V0VGltZW91dCJdLCJtYXBwaW5ncyI6IkFBQUEsYUFDQUEsUUFBUUMsWUFBYSxFQUFyQkQsUUFBUUMsV0FBQUEsRUFDUkQsSUFBQUEsTUFBc0IsV0FDbEJFLFNBQVFBLEVBQUFDLEdBQ1JDLEtBQVNGLGlCQUFZQyxFQUFBRSxpQkFDYkQsS0FBQ0MsZ0JBQW1CRixFQUFL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QUNGMUIsSUFBQUEsTUFDTHZCLEtBQUF1QixZQUFBc0IsTUFBQUssSUFBQSxRQUNRLE1BQ0gzQixJQUFBQSxTQUNMdkIsS0FBQXVCLFlBQUFzQixNQUFBTSxPQUFBLFFBSUpuRCxLQUFLb0IsYUFBUXlCLE1BQUFFLFdBQUEsV0FBQTVCLE9BQUFuQixLQUFBUSxpQkFBQSxJQUFBLE1BQUFXLE9BQUFuQixLQUFBUyxpQkFBQSxnQkFBQVUsT0FBQW5CLEtBQUFTLGlCQUFBLEtBQUFVLE9BQUFuQixLQUFBUSxpQkFBQSxJQUFBLE1BRVRWLEVBaktFLEdBd0t0QkYsUUFMUUUsTUFBQUEiLCJmaWxlIjoibGlicy9wb3B1cENsYXNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5Qb3B1cCA9IHZvaWQgMDtcbnZhciBQb3B1cCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQb3B1cChkYXRhKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlclNlbGVjdG9ycyA9IGRhdGEudHJpZ2dlclNlbGVjdG9ycztcbiAgICAgICAgdGhpcy5vdmVybGF5U2VsZWN0b3IgPSBkYXRhLm92ZXJsYXlTZWxlY3RvcjtcbiAgICAgICAgdGhpcy53aW5kb3dTZWxlY3RvciA9IGRhdGEud2luZG93U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuY2xvc2VCdG5TZWxlY3RvcnMgPSBkYXRhLmNsb3NlQnRuU2VsZWN0b3JzO1xuICAgICAgICB0aGlzLmRpc3BsYXlQb3B1cCA9IGRhdGEuZGlzcGxheVBvcHVwIHx8ICdmbGV4JztcbiAgICAgICAgdGhpcy5wb3B1cEhlaWdodCA9IGRhdGEucG9wdXBIZWlnaHQgfHwgJzEwMHZoJztcbiAgICAgICAgdGhpcy5wb3B1cFdpZHRoID0gZGF0YS5wb3B1cFdpZHRoIHx8ICcxMDAlJztcbiAgICAgICAgdGhpcy5kaXNhcHBlYXJpbmdUaW1lID0gZGF0YS5kaXNhcHBlYXJpbmdUaW1lIHx8IDYwMDsgLy/RjdGC0L4g0LTQu9GPIHRyYW5zaXRpb24gXG4gICAgICAgIHRoaXMuZGlzYXBwZWFyaW5nVHlwZSA9IGRhdGEuZGlzYXBwZWFyaW5nVHlwZSB8fCAnbGluZWFyJzsgLy/RjdGC0L4g0LTQu9GPIHRyYW5zaXRpb24gXG4gICAgICAgIHRoaXMuc2xpZGluZ1RpbWUgPSBkYXRhLnNsaWRpbmdUaW1lIHx8IDUwMDsgLy/RjdGC0L4g0LTQu9GPIHRyYW5zaXRpb24gXG4gICAgICAgIHRoaXMuc2xpZGluZ1R5cGUgPSBkYXRhLnNsaWRpbmdUeXBlIHx8ICdlYXNlJzsgLy/RjdGC0L4g0LTQu9GPIHRyYW5zaXRpb24gXG4gICAgICAgIHRoaXMuc2xpZGluZ0RpciA9IGRhdGEuc2xpZGluZ0RpciB8fCAndG9wJzsgLy/QvtGC0LrRg9C00LAgKNGBINC60LDQutC+0Lkg0YHRgtC+0YDQvtC90YspINCy0YvQtdC00LXRgiDQv9C+0L/QsNC/INC10YHQu9C4INC+0L0g0LTQvtC70LbQtdC9INCy0YvQtdGF0LDRgtGMXG4gICAgICAgIHRoaXMuYXV0b2Nsb3NlVGltZSA9IGRhdGEuYXV0b2Nsb3NlVGltZTtcbiAgICAgICAgdGhpcy5vcGVuT25LZXlzID0gZGF0YS5vcGVuT25LZXlzOyAvL9C00L7Qu9C20LXQvSDQsdGL0YLRjCDQvNCw0YHRgdC40LLQvtC8INC60L3QvtC/0L7QulxuICAgICAgICB0aGlzLmNsb3NlT25LZXlzID0gZGF0YS5jbG9zZU9uS2V5czsgLy/QtNC+0LvQttC10L0g0LHRi9GC0Ywg0LzQsNGB0YHQuNCy0L7QvCDQutC90L7Qv9C+0LpcbiAgICAgICAgdGhpcy5jbG9zZU9uTWlzcyA9IGRhdGEuY2xvc2VPbk1pc3MgfHwgdHJ1ZTsgLy/Qt9Cw0LrRgNGL0YLRjCwg0LXRgdC70Lgg0LrQu9C40Log0LzQuNC80L4g0YbQtdC90YLRgNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwXG4gICAgICAgIHRoaXMuYXBwZWFyVHlwZSA9IGRhdGEuYXBwZWFyVHlwZSB8fCAnc2xpZGUnOyAvL9GC0LjQvyDQv9C+0Y/QstC70LXQvdC40Y8g0L/QvtC/0LDQv9CwOiBzbGlkZSAo0LLRi9C10YXQsNGC0Ywg0LjQty3Qt9CwINCz0YDQsNC90LjRhtGLINGN0LrRgNCw0L3QsCkg0LjQu9C4IHJldmVhbCAo0L/QvtGP0LLQuNGC0YHRjy/QuNGB0YfQtdC30L3Rg9GC0Ywg0L/QviDRhtC10L3RgtGA0YMpXG4gICAgICAgIHRoaXMucG9wdXBPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIlwiLmNvbmNhdCh0aGlzLm92ZXJsYXlTZWxlY3RvcikpO1xuICAgICAgICB0aGlzLnBvcHVwV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIlwiLmNvbmNhdCh0aGlzLndpbmRvd1NlbGVjdG9yKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXBwZWFyVHlwZSk7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cbiAgICBQb3B1cC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIC8v0L/QviDQvdCw0LbQsNGC0LjRjiDQv9C+INGC0YDQuNCz0LPQtdGA0LDQvCDQsdGD0LTQtdGCINC+0YLQutGA0YvQstCw0YLRjNGB0Y8g0L/QvtC/0LDQv1xuICAgICAgICAvL9CyIHRoaXMuVGlnZ2VyU2VsZWN0b3JzINC/0LXRgNC10YfQuNGB0LvQtdC90Ysg0L3Rg9C20L3Ri9C1INGB0LXQu9C10LrRgtC+0YDRiyDQtNC70Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAuXG4gICAgICAgIC8v0J/RgNC+0YXQvtC00LjQvCDQv9C+INC90LjQvCDRhtC40LrQu9C+0LwsINC4INC90LAg0LrQsNC20LTQvtC5INC40YLQtdGA0LDRhtC40Lgg0LHQtdGA0ZHQvCDQstGB0LUg0Y3Qu9C10LzQtdC90YLRiyDQvdCwINGB0YLRgNCw0L3QuNGG0LUg0YEg0LrQsNC20LTRi9C8INGB0LXQu9C10LrRgtC+0YDQvtC8XG4gICAgICAgIC8v0Jgg0L3QsCDQutCw0LbQtNGL0Lkg0Y3Qu9C10LzQtdC90YIg0YEg0YLQsNC60LjQvCDRgdC10LvQtdC60YLQvtGA0L7QvCDQstC10YjQsNC10Lwg0YHQu9GD0YjQsNGC0LXQu9GMINGB0L7QsdGL0YLQuNC5XG4gICAgICAgIHRoaXMudHJpZ2dlclNlbGVjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgLy/QsdC10YDRkdC8INCy0YHQtSDRjdC70LXQvNC10L3RgtGLINGBINGB0LXQu9C10LrRgtC+0YDQvtC8INC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwICjRgdC90LDRh9Cw0LvQsCDRgSDQv9C10YDQstGL0LwsINC/0L7RgtC+0Lwg0YHQviDQstGC0L7RgNGL0Lwg0Lgg0YIu0LQuKVxuICAgICAgICAgICAgdmFyIGFsbFRyaWdnZXJJbnN0YW5jZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGl0ZW0pO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FsbFRyaWdnZXJJbnN0YW5jZXM6JylcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFsbFRyaWdnZXJJbnN0YW5jZXMpXG4gICAgICAgICAgICAvL9C/0YDQvtGF0L7QtNC40Lwg0L/QviDQvdC40Lwg0YbQuNC60LvQvtC8XG4gICAgICAgICAgICBhbGxUcmlnZ2VySW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RyaWdnZXIgaW5zdGFuY2U6Jyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbSk7XG4gICAgICAgICAgICAgICAgLy/QuCDQvdCwINC60LDQttC00YvQuSDRjdC70LXQvNC10L3RgiDQstC10YjQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40LlcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXMuc2hvdy5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgX3RoaXMuc2hvdy5iaW5kKF90aGlzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v0LIgdGhpcy5jbG9zZUJ0blNlbGVjdG9ycyDQv9C10YDQtdGH0LjRgdC70LXQvdGLINC90YPQttC90YvQtSDRgdC10LvQtdC60YLQvtGA0Ysg0LTQu9GPINC30LDQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwLlxuICAgICAgICAvL9Cf0YDQvtGF0L7QtNC40Lwg0L/QviDQvdC40Lwg0YbQuNC60LvQvtC8LCDQuCDQvdCwINC60LDQttC00L7QuSDQuNGC0LXRgNCw0YbQuNC4INCx0LXRgNGR0Lwg0LLRgdC1INGN0LvQtdC80LXQvdGC0Ysg0L3QsCDRgdGC0YDQsNC90LjRhtC1INGBINC60LDQttC00YvQvCDRgdC10LvQtdC60YLQvtGA0L7QvFxuICAgICAgICAvL9CYINC90LAg0LrQsNC20LTRi9C5INGN0LvQtdC80LXQvdGCINGBINGC0LDQutC40Lwg0YHQtdC70LXQutGC0L7RgNC+0Lwg0LLQtdGI0LDQtdC8INGB0LvRg9GI0LDRgtC10LvRjCDRgdC+0LHRi9GC0LjQuVxuICAgICAgICB0aGlzLmNsb3NlQnRuU2VsZWN0b3JzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAvL9Cx0LXRgNGR0Lwg0LLRgdC1INGN0LvQtdC80LXQvdGC0Ysg0YEg0YHQtdC70LXQutGC0L7RgNC+0Lwg0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAgKNGB0L3QsNGH0LDQu9CwINGBINC/0LXRgNCy0YvQvCwg0L/QvtGC0L7QvCDRgdC+INCy0YLQvtGA0YvQvCDQuCDRgi7QtC4pXG4gICAgICAgICAgICB2YXIgYWxsQ2xvc2VCdG5JbnN0YW5jZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGl0ZW0pO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FsbENsb3NlQnRuSW5zdGFuY2VzOicpXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhbGxDbG9zZUJ0bkluc3RhbmNlcylcbiAgICAgICAgICAgIC8v0L/RgNC+0YXQvtC00LjQvCDQv9C+INC90LjQvCDRhtC40LrQu9C+0LxcbiAgICAgICAgICAgIGFsbENsb3NlQnRuSW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Nsb3NlQnRuIGluc3RhbmNlOicpXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbSlcbiAgICAgICAgICAgICAgICAvL9C4INC90LAg0LrQsNC20LTRi9C5INGN0LvQtdC80LXQvdGCINCy0LXRiNCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjQuVxuICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpcy5oaWRlLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBfdGhpcy5oaWRlLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VPbk1pc3MpIHtcbiAgICAgICAgICAgIHZhciBwb3B1cFNlbGVjdG9yXzEgPSB0aGlzLm92ZXJsYXlTZWxlY3Rvci5zbGljZSgxKTsgLy93aXRob3V0IGRvdCBcbiAgICAgICAgICAgIHRoaXMucG9wdXBPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiXCIuY29uY2F0KHBvcHVwU2VsZWN0b3JfMSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJcIi5jb25jYXQocG9wdXBTZWxlY3Rvcl8xKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8v0LLQtdGI0LDQtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0L3QsCDQutC70LDQstC40YjQuCDQvdCwINGB0L7QsdGL0YLQuNGPINC+0YLQutGA0YvRgtC40Y8g0Lgg0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAgXG4gICAgICAgIHZhciBoYW5nTGlzdGVuZXJzID0gZnVuY3Rpb24gKGtleXMsIGV2ZW50LCBmdW5jKSB7XG4gICAgICAgICAgICBpZiAoa2V5cyA9PT0gdm9pZCAwKSB7IGtleXMgPSBmYWxzZTsgfVxuICAgICAgICAgICAgaWYgKGtleXMpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGtleXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gPT0gZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIGlmICh0aGlzLm9wZW5PbktleXMpIHtcbiAgICAgICAgLy8gICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuY2xvc2VPbktleXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICBpZiAocGFyc2VJbnQoaXRlbSwgMTApID09PSBlLmtleUNvZGUpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBpZiAodGhpcy5jbG9zZU9uS2V5cykge1xuICAgICAgICAvLyAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgIC8vICAgICAgICAgdGhpcy5jbG9zZU9uS2V5cy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIC8vICAgICAgICAgICAgIGlmIChwYXJzZUludChpdGVtLCAxMCkgPT09IGUua2V5Q29kZSkge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIC8vICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAvLyB9XG4gICAgICAgIGhhbmdMaXN0ZW5lcnModGhpcy5vcGVuT25LZXlzLCAna2V5ZG93bicsIHRoaXMuc2hvdy5iaW5kKHRoaXMpKTtcbiAgICAgICAgaGFuZ0xpc3RlbmVycyh0aGlzLmNsb3NlT25LZXlzLCAna2V5ZG93bicsIHRoaXMuaGlkZS5iaW5kKHRoaXMpKTtcbiAgICB9O1xuICAgIFBvcHVwLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnBvcHVwT3ZlcmxheS5zdHlsZS56SW5kZXggPSA5OTk5OTk7XG4gICAgICAgIGlmICh0aGlzLmFwcGVhclR5cGUgPT0gJ3NsaWRlJykge1xuICAgICAgICAgICAgdGhpcy5wb3B1cFdpbmRvdy5zdHlsZS50cmFuc2l0aW9uID0gXCJhbGwgXCIuY29uY2F0KHRoaXMuc2xpZGluZ1RpbWUgLyAxMDAwLCBcInMgXCIpLmNvbmNhdCh0aGlzLnNsaWRpbmdUeXBlLCBcIiwgaGVpZ2h0IDBzIFwiKS5jb25jYXQodGhpcy5zbGlkaW5nVHlwZSwgXCIgMHNcIik7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2xpZGluZ1RpbWUgJiYgdGhpcy5zbGlkaW5nVHlwZSAmJiB0aGlzLnNsaWRpbmdEaXIpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cFdpbmRvdy5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cFdpbmRvdy5zdHlsZS5yaWdodCA9ICcwcHgnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwV2luZG93LnN0eWxlLnRvcCA9ICcwcHgnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwV2luZG93LnN0eWxlLmJvdHRvbSA9ICcwcHgnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcHVwT3ZlcmxheS5zdHlsZS5oZWlnaHQgPSB0aGlzLnBvcHVwSGVpZ2h0O1xuICAgICAgICB0aGlzLnBvcHVwT3ZlcmxheS5zdHlsZS53aWR0aCA9IHRoaXMucG9wdXBXaWR0aDtcbiAgICAgICAgdGhpcy5wb3B1cE92ZXJsYXkuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgIHRoaXMucG9wdXBPdmVybGF5LnN0eWxlLnRyYW5zaXRpb24gPSBcIm9wYWNpdHkgXCIuY29uY2F0KHRoaXMuZGlzYXBwZWFyaW5nVGltZSAvIDEwMDAsIFwicyBcIikuY29uY2F0KHRoaXMuZGlzYXBwZWFyaW5nVHlwZSwgXCIsIGhlaWdodCAwcyBcIikuY29uY2F0KHRoaXMuZGlzYXBwZWFyaW5nVHlwZSwgXCIgMHNcIik7XG4gICAgICAgIC8v0LXRgdC70Lgg0LfQsNC00LDQvdC+INCy0YDQtdC80Y8g0LDQstGC0L7Qt9Cw0LrRgNGL0YLQuNGPLCDRgtC+INC30LDQutGA0YvRgtGMINC/0L7Qv9Cw0L8g0L/RgNC+0YXQvtC20LTQtdC90LjRjyDQstGA0LXQvNC10L3QuFxuICAgICAgICBpZiAodGhpcy5hdXRvY2xvc2VUaW1lKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgX3RoaXMuaGlkZSgpOyB9LCB0aGlzLmF1dG9jbG9zZVRpbWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQb3B1cC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gICAgICAtLS0gSGlkZSBQb3B1cFxuICAgICAgICB0aGlzLnBvcHVwT3ZlcmxheS5zdHlsZS5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLnBvcHVwT3ZlcmxheS5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgLy8gICAgICAtLS0gICAgIFxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnBvcHVwT3ZlcmxheSk7XG4gICAgICAgIGlmICh0aGlzLmFwcGVhclR5cGUgPT0gJ3NsaWRlJykge1xuICAgICAgICAgICAgdGhpcy5wb3B1cFdpbmRvdy5zdHlsZS50cmFuc2l0aW9uID0gXCJhbGwgXCIuY29uY2F0KHRoaXMuc2xpZGluZ1RpbWUgLyAxMDAwLCBcInMgXCIpLmNvbmNhdCh0aGlzLnNsaWRpbmdUeXBlLCBcIiwgaGVpZ2h0IDBzIFwiKS5jb25jYXQodGhpcy5zbGlkaW5nVHlwZSwgXCIgXCIpLmNvbmNhdCh0aGlzLnNsaWRpbmdUaW1lIC8gMTAwMCwgXCJzXCIpO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnNsaWRpbmdEaXIpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cFdpbmRvdy5zdHlsZS5sZWZ0ID0gJy0xMDAlJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwV2luZG93LnN0eWxlLnJpZ2h0ID0gJy0xMDAlJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cFdpbmRvdy5zdHlsZS50b3AgPSAnLTEwMCUnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwV2luZG93LnN0eWxlLmJvdHRvbSA9ICctMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9wdXBPdmVybGF5LnN0eWxlLnRyYW5zaXRpb24gPSBcIm9wYWNpdHkgXCIuY29uY2F0KHRoaXMuZGlzYXBwZWFyaW5nVGltZSAvIDEwMDAsIFwicyBcIikuY29uY2F0KHRoaXMuZGlzYXBwZWFyaW5nVHlwZSwgXCIsIGhlaWdodCAwcyBcIikuY29uY2F0KHRoaXMuZGlzYXBwZWFyaW5nVHlwZSwgXCIgXCIpLmNvbmNhdCh0aGlzLmRpc2FwcGVhcmluZ1RpbWUgLyAxMDAwLCBcInNcIik7XG4gICAgfTtcbiAgICByZXR1cm4gUG9wdXA7XG59KCkpO1xuZXhwb3J0cy5Qb3B1cCA9IFBvcHVwO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wb3B1cENsYXNzLmpzLm1hcFxuIl19
